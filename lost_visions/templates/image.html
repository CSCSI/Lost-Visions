<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../docs-assets/ico/favicon.png">

    <title>Lost Visions</title>
    {% load staticfiles %}
    <!-- Bootstrap -->
    {#    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css" rel="stylesheet">#}
    <script src="//code.jquery.com/jquery-1.9.1.js"></script>

    <link href="{% static "bootstrap.slate.min.css" %}" rel="stylesheet">


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="{% static "jquery.imgareaselect-1.0.0-rc.1/distfiles/css/imgareaselect-default.css" %}" />
    {#    <script type="text/javascript" src="{% static "jquery.imgareaselect-0.9.10/scripts/jquery.min.js" %}"></script>#}
    <script type="text/javascript" src="{% static "jquery.imgareaselect-0.9.10/scripts/jquery.imgareaselect.min.js" %}"></script>
    {#    <script type="text/javascript" src="{% static "jquery.imgareaselect-1.0.0-rc.1/jquery.imgareaselect.min.js" %}"></script>#}

    <style>
        #format { margin-top: 2em; }
    </style>

</head>

<body>

<script type="text/javascript">

    function preview(img, selection) {
        if (!selection.width || !selection.height)
            return;

        var scaleX = 100 / selection.width;
        var scaleY = 100 / selection.height;

        {#        var scaleX = 100 / (selection.width || 1);#}
        {#        var scaleY = 100 / (selection.height || 1);#}

        {#    $('#ferret + div > img').css({#}
        {#        width: Math.round(scaleX * 400) + 'px',#}
        {#        height: Math.round(scaleY * 300) + 'px',#}
        {#        marginLeft: '-' + Math.round(scaleX * selection.x1) + 'px',#}
        {#        marginTop: '-' + Math.round(scaleY * selection.y1) + 'px'#}
        {#    });#}

        $('#preview img').css({
            width: Math.round(scaleX * 400),
            height: Math.round(scaleY * 300),
            marginLeft: -Math.round(scaleX * selection.x1),
            marginTop: -Math.round(scaleY * selection.y1)
        });

        $('#x1').val(selection.x1);
        $('#y1').val(selection.y1);
        $('#x2').val(selection.x2);
        $('#y2').val(selection.y2);
        $('#w').val(selection.width);
        $('#h').val(selection.height);
    }


    $(document).ready(function () {
        $('#photo').imgAreaSelect({ handles: true, fadeSpeed: 200, onSelectChange: preview });

        {#        $( "#check" ).button();#}
        $( "#format" ).buttonset();

        $(function() {
            $( "input[type=checkbox]" )
                    .button()
        });
    });


</script>

<nav class="navbar navbar-default" role="navigation">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
        <a class="navbar-brand" href="#">Lost Visions</a>
    </div>
    <div class="navbar-header">
    </div>
    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
            <li class="active"><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
                <ul class="dropdown-menu">
                    <li><a href="#">Action</a></li>
                    <li><a href="#">Another action</a></li>
                    <li><a href="#">Something else here</a></li>
                    <li class="divider"></li>
                    <li><a href="#">Separated link</a></li>
                    <li class="divider"></li>
                    <li><a href="#">One more separated link</a></li>
                </ul>
            </li>
        </ul>
        <form class="navbar-form navbar-right" role="search">
            <div class="form-group">
                <input type="text" class="form-control" placeholder="Search">
            </div>
            <button type="submit" class="btn btn-default">Submit</button>
        </form>
    </div><!-- /.navbar-collapse -->
</nav>

<div class="container">

    <div class="col-xs-12 col-sm-6">
        <img id='photo' src="{{ image.imageurl }}">
    </div><!--/span-->

    <div class="col-xs-12 col-sm-6">

        <div class="row">
            {#        <form action="http://www.w3schools.com/html/html_form_action.asp" method="get">#}
            <form action="{% url 'image.tags' %}" method="post">
                {% csrf_token %}

                {% for key in image.tags %}
                    <div class="span4">
                        <input type="checkbox" value="{{ key }}" id="check{{ forloop.counter }}" />

                        <label for="check{{ forloop.counter }}">{{ key }}</label>
                    </div>
                    {#                <button type="button" class="btn btn-default">{{ key }}</button>#}
                {% endfor %}

                {{ tag_form.non_field_errors }}
                {{ tag_form.as_p }}
                <input type="submit" name="send" value="Submit Form" />

            </form>
        </div>

    </div>
    <hr>


</div><!--/.container-->

<div class="container">
    <div class="col-xs-12 col-sm-6">

        {% for mykey,value in image.items %}
            {% if mykey != 'tags' %}
                <div class="row">
                    <dl>
                        <dt>{{ mykey }}</dt>

                        <dd>{{ value }} </dd>
                    </dl>

                </div><!--/row-->
            {% endif %}
        {% endfor %}
    </div>
</div><!--/span-->

<div>
    <table style="margin-top: 1em;">
        <thead>
        <tr>
            <th colspan="2" style="font-size: 110%; font-weight: bold; text-align: left; padding-left: 0.1em;">
                Coordinates
            </th>
            <th colspan="2" style="font-size: 110%; font-weight: bold; text-align: left; padding-left: 0.1em;">
                Dimensions
            </th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td style="width: 10%;"><b>X<sub>1</sub>:</b></td>
            <td style="width: 30%;"><input type="text" id="x1" value="-" /></td>
            <td style="width: 20%;"><b>Width:</b></td>
            <td><input type="text" value="-" id="w" /></td>
        </tr>
        <tr>
            <td><b>Y<sub>1</sub>:</b></td>
            <td><input type="text" id="y1" value="-" /></td>
            <td><b>Height:</b></td>
            <td><input type="text" id="h" value="-" /></td>
        </tr>
        <tr>
            <td><b>X<sub>2</sub>:</b></td>
            <td><input type="text" id="x2" value="-" /></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td><b>Y<sub>2</sub>:</b></td>
            <td><input type="text" id="y2" value="-" /></td>
            <td></td>
            <td></td>
        </tr>
        </tbody>
    </table>
</div>
<div class="container">
    <div id="preview" style="width: 100px; height: 100px; overflow: hidden;">
        <img src="{{ image.imageurl }}"/>
    </div>
</div>
<footer>
    <p>&copy; Cardiff University 2014</p>
</footer>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
{#<script src="https://code.jquery.com/jquery.js"></script>#}
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css"></script>

<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>

<link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
<script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>

</body>
</html>
