{% extends "base.html" %}
{% load staticfiles %}
{% load url from future %}

{% block content %}

    <script type="text/javascript" xmlns="http://www.w3.org/1999/html">

    {#        function register_tree_categories() {#}
    {#            $('#add_category').click(function(){#}
    {#                console.log(this);#}
    {##}
    {#                var input_field = $("#input_tag");#}
    {#                var tag_string = input_field.val();#}
    {#                if (tag_string != "") {#}
    {#                    var id = 'id_' + tag_string;#}
    {##}
    {#                    var $check = $('<input/>').attr({type: 'checkbox', id: id, checked: true, name: tag_string});#}
    {#                    var $label = $('<label/>').attr({for: id}).html(tag_string);#}
    {##}
    {##}
    {#                    $("#add_category_body").prepend($label).prepend($check);#}
    {##}
    {#                    $( "input[type=checkbox]" )#}
    {#                            .button();#}
    {#                }#}
    {#                input_field.val("");#}
    {#            });#}
    {#        }#}

    $(document).ready(function () {
        var all_tags = [];

        $( "#dictionary" ).autocomplete({
            source: "{% url 'find.word' %}",
            minLength: 3,
            select: function( event, ui ) {
                {#                console.log( ui.item ?#}
                {#                        "Selected: " + ui.item.value + " aka " + ui.item.id :#}
                {#                        "Nothing selected, input was " + this.value );#}

                var tag_string = ui.item.value;
                var id = 'id_' + tag_string;

                var $check = $('<input/>').attr({type: 'checkbox', id: id, checked: true, name: tag_string, x_percent: hightlighted_x_percent, y_percent: hightlighted_y_percent});
                var $label = $('<label/>').attr({for: id}).html(tag_string);


                var d = new Date();
                var datetime = d.toISOString();
                all_tags.push({tag: tag_string,
                    x_percent: hightlighted_x_percent,
                    y_percent: hightlighted_y_percent,
                    x_pixel: highlighted_x_pixel,
                    y_pixel: highlighted_y_pixel,
                    datetime: datetime,
                    tag_order: all_tags.length
                });

                document.getElementById("tag_info").value = JSON.stringify(all_tags);
                console.log(JSON.parse(document.getElementById("tag_info").value));

                $("#add_tags_body").prepend($label).prepend($check);

                $( "input[type=checkbox]" )
                        .button();
            }
        }).keypress(function(e) {
            if(e.which == 13) {
                alert('You pressed enter!');
                return false;
            }
            return true;
        });


        $('#load_new_image').click(function(){
            window.location.replace('{% url 'image.random' %}');
        });

        $('#save_image').click(function() {
            $.ajax({
                type: "POST",
                url: "{% url 'user_profile.save_image' %}",
                data: {
                    csrfmiddlewaretoken: document.getElementsByName('csrfmiddlewaretoken')[0].value,
                    image_id: {{ image_id }}
                },
                success: function(data) {
                    alert("Saved Image");
                },
                error: function(xhr, textStatus, errorThrown) {
                    alert("Problem saving Image: "+errorThrown+xhr.status+xhr.responseText);
                }
            });
        });

        $('#add_tag').click(function(){

            var input_field = $("#input_tag");
            var tag_string = input_field.val();
            if (tag_string != "") {
                var id = 'id_' + tag_string;

                var $check = $('<input/>').attr({type: 'checkbox', id: id, checked: true, name: tag_string});
                var $label = $('<label/>').attr({for: id}).html(tag_string);

                $( "input[type=checkbox]" )
                        .button();
            }
            input_field.val("");
        });

        var degs = 0;
        var r = $("#photo").get(0).getBoundingClientRect();
        {#        console.log(r);#}

        $(".rota").click(function() {
            {#            console.log("click");#}
            var photo = $("#photo");
            var turn_degs = $(this).data('degs');

            if (turn_degs == 'reset') {
                degs = 0;
            } else {
                degs += turn_degs;

                if (degs < 0) {
                    degs += 360;
                }
            }

            photo.rotate( {animateTo: degs}, 'abs' );

            degs = degs%360;

            var offset_top = photo.offset().top;

            var offset_l = photo.offset().left;

            $("#rotval").html(degs + " degrees rotation" + "<br>" +
                    offset_top + "<br>" + offset_l + "<br>" + r.top+ "<br>" + r.left);

            load_css();
        });


        var hightlighted_x_percent = 0;
        var hightlighted_y_percent = 0;
        var highlighted_x_pixel = 0;
        var highlighted_y_pixel = 0;

        $('#photo').click(function(e) {
            var posX = $(this).offset().left;
            var posY = $(this).offset().top;

            var x = (e.pageX - posX);
            var y = (e.pageY - posY);

            var canvas_object = $('#photo'),
                    canvas = canvas_object.get(0),
                    ctx = canvas.getContext('2d');
            canvas.width = canvas.width;

            ctx.strokeStyle = '#00FF00';

            all_tags.forEach(function(entry) {
                {#                ctx.beginPath();#}
                ctx.fillStyle = "green";
                ctx.arc(entry.x_pixel-10, entry.y_pixel-10, 10, 0, 2*Math.PI);
                ctx.fill();
                {#                ctx.closePath();#}
            });

            ctx.strokeStyle = '#FF0000';

            {#            ctx.beginPath();#}
            ctx.drawImage(img, 0, 0, img.width, img.height, 0, 0, canvas.width, canvas.height);

            var coords = translateCoords(x, y, canvas, degs);

            ctx.rect(coords.x-10, coords.y-10, 20, 20);
            hightlighted_x_percent = coords.x_percent;
            hightlighted_y_percent = coords.y_percent;
            highlighted_x_pixel = coords.x;
            highlighted_y_pixel = coords.y;

            ctx.stroke();
        });

        $('#category_tree').bind("ready.jstree", function(){

        }).jstree({ 'core' : {
            'data' : dmvi_categories

        }
        }).on("changed.jstree", function (e, data) {

            var inst = data.instance;
            var i, j = [];
            for(i = 0, j = data.selected.length; i < j; i++) {

                if (inst.is_leaf(inst.get_node(data.selected[i]))) {

                    var tag_string = inst.get_node(data.selected[i]).text
                    var id = 'id_' + tag_string;

                    var $check = $('<input/>').attr({type: 'checkbox', id: id, checked: true, name: tag_string});
                    var $label = $('<label/>').attr({for: id}).html(tag_string);


                    $("#add_category_body").prepend($label).prepend($check);

                    $( "input[type=checkbox]" )
                            .button();
                } else {
                    inst.toggle_node(inst.get_node(data.selected[i]));
                }
            }

        });

        var availableTags = [];

        dmvi_categories.forEach(function(entry) {

            availableTags.push(entry['text']);

        });


        cascade_nodes = function(id){
            dmvi_categories.forEach(function(entry) {
                if(entry['id'] == id) {
                    $('#category_tree').jstree('open_node', entry['id']);
                    cascade_nodes(entry['parent'])
                }
            });
        };

        $( "#tags" ).autocomplete({
            source: availableTags,
            select: function( event, ui ) {
                $('#category_tree').jstree('close_all', -1);
                {#                    console.log( ui.item.label );#}
                {#                    console.log( ui.item.value );#}
                dmvi_categories.forEach(function(entry) {

                    if (entry['text'] == ui.item.label) {
                        {#                            $('#category_tree').jstree('toggle_node', entry['id']);#}
                        cascade_nodes(entry['id'])
                    }
                });
                return false;
            }
        });

        var active = true;

        $('#collapse-init').click(function () {
            if (active) {
                active = false;
                $('.panel-collapse').collapse('show');
                $('.panel-title').attr('data-toggle', '');
                $(this).text('-');
            } else {
                active = true;
                $('.panel-collapse').collapse('hide');
                $('.panel-title').attr('data-toggle', 'collapse');
                $(this).text('+');
            }
        });

        $('#accordion').on('show.bs.collapse', function () {
            if (active) $('#accordion .in').collapse('hide');
        });

        {#        resize_box = function(){#}
        {##}
        {#            var photo = $("#photo");#}
        {#            var photo_width = photo.width();#}
        {#            var photo_height = photo.height();#}
        {##}
        {#            var p_b = $("#photo_background");#}
        {##}
        {#            console.log("x,y : " + photo_width + " " + photo_height)#}
        {##}
        {#            var max_length = (photo_height > photo_width) ? photo_height : photo_width;#}
        {##}
        {#            if (photo_width > photo_height) {#}
        {#                p_b.height(photo_width);#}
        {#                p_b.width(photo_width);#}
        {##}
        {#                photo.css("height: auto");#}
        {#                photo.css("width: auto");#}
        {#            } else {#}
        {##}
        {#                console.log("1 " + photo.width());#}
        {#                photo.css("height: " + photo_width + "px; width: auto; display: block;");#}
        {#                console.log("2 " + photo.width());#}
        {##}
        {##}
        {#                photo_width = photo.width();#}
        {#                p_b.height(photo_width);#}
        {#                p_b.width(photo_width);#}
        {#            }#}
        {##}
        {#            var top_margin = (p_b.height()/2) - (photo.height() /2);#}
        {##}
        {#            photo.css("margin-top:", top_margin);#}
        {##}
        {#            console.log("square : " + max_length);#}
        {#            console.log("margin : " + top_margin);#}
        {##}
        {#        };#}

        var canvas_object = $('#photo'),
                canvas = canvas_object.get(0),
                ctx = canvas.getContext('2d'),
                parent = canvas_object.parent(),
                {#    line = new Line(ctx);#}
                img = new Image;

        function getMousePos(canvas, evt) {
            var rect = canvas.getBoundingClientRect();
            return {
                x: evt.clientX - rect.left,
                y: evt.clientY - rect.top
            };
        };

        function translateCoords(mouseX, mouseY, component, degreesRotation) {
            var centerpointX = (component.getBoundingClientRect().width /2);
            var centerpointY = (component.getBoundingClientRect().height /2);

            var ratio = centerpointX / centerpointY;

            var mouseOffsetX = mouseX - centerpointX;
            var mouseOffsetY = mouseY - centerpointY;

            var radians = ((degreesRotation) * (Math.PI/180));

            var theta = Math.atan(mouseOffsetY / mouseOffsetX);

            var hyp = mouseOffsetX / Math.cos(theta);

            var scale = 1;

            if (Math.cos(radians) == 0) {
                scale = img.naturalWidth / canvas.height;
            } else {
                scale = img.naturalWidth / canvas.width;
            }

            var draw_x = (hyp * Math.cos(theta - radians)) + centerpointX;

            var draw_y = (hyp * Math.sin(theta - radians)) + centerpointY;

            return {
                radians: radians,
                theta: theta,
                hyp: hyp,
                x : draw_x,
                y : draw_y,
                offsetX : mouseOffsetX,
                offsetY : mouseOffsetY,
                centerpointX : centerpointX,
                centerpointY :  centerpointY,
                x_percent : (((draw_x/img.naturalWidth)*scale) *100),
                y_percent : (((draw_y/img.naturalHeight)*scale) *100)
            }
        };

        canvas.addEventListener('mousemove', function(evt) {
            var mousePos = getMousePos(canvas, evt);
            var translated_variables = translateCoords(mousePos.x, mousePos.y, canvas, degs);

            var message = 'Mouse position: ' + mousePos.x + ',' + mousePos.y;
            message += ('<br>draw coords: ' + translated_variables.x + ' , ' + translated_variables.y);
            message += ('<br>scale-x% : ' + translated_variables.x_percent + ', scale-y% ' + translated_variables.y_percent);

            message += ('<br>offset : ' + translated_variables.offsetX + ' , ' + translated_variables.offsetY);
            message += ('<br>centerpoint : ' + translated_variables.centerpointX + ' , ' + translated_variables.centerpointY);
            message += ('<br>theta : ' + translated_variables.theta + ', hyp : ' + translated_variables.hyp);
            message += ('<br>degs : ' + degs + ', rads : ' + translated_variables.radians);
            message += ('<br>t-x : ' + (mousePos.x / translated_variables.x) + ', t-y : ' + (mousePos.y / translated_variables.y));

            {#            $('#output').html(message);#}
        }, false);

        img.src = "{{ image.imageurl }}";
        img.onload = function(){
            var scale = img.naturalWidth / parent.width();
            canvas.width = parent.width();
            canvas.height = img.naturalHeight / scale;
            ctx.drawImage(img, 0, 0, img.width, img.height, 0, 0, canvas.width, canvas.height);

        };
    });


    </script>



    <div class="container">

    <div class="col-xs-12 col-sm-6">
        <div class="jumbotron">
            <div id="photo_background" style="">
                <canvas id='photo'></canvas>
                {#            src="{{ image.imageurl }}  style=' min-width:50px; min-height: 50px;width: 100%; height:auto; "#}
            </div>
        </div>

        <div class="panel-footer">
            <ul class="pager">
                <li class="previous">
                    <a class="rota btn btn-default" data-degs="-90">← Rotate left</a>
                </li>
                <li class="next">
                    <a class="rota btn btn-default" data-degs="90">Rotate right →</a>
                </li>
            </ul>
            <ul class="pager">
                <li>
                    <a class="rota btn btn-default" data-degs="reset">Reset</a>
                </li>
                <li>
                    <a class="btn btn-default" data-toggle="modal" data-target=".bs-example-modal-lg">Zoom</a>
                </li>
                <li>
                    <a class="btn btn-default" href="{% url 'image.map' image_id %}" target="_blank">Map</a>
                </li>
                {% if user.is_authenticated %}
                    <li>
                        <a class="btn btn-default save_image" id="save_image">Save</a>
                    </li>
                {% endif %}
            </ul>
            <div id="output"></div>
        </div>

    </div><!--/span-->

    <div class="col-xs-12 col-sm-6">

    <div class="container-fluid">

    <div id="right-main">

    <form action="{% url 'image.tags' %}" id="image-taggin-form" method="post">{% csrf_token %}
    {{ tag_form.non_field_errors }}
    <input type="hidden" name="image_id" value="{{ image_id }}" />
    <input type="hidden" id = 'tag_info' name="tag_info" value="" />


    <div class="panel-group" id="accordion">


    <div class="panel panel-default">
        <div class="panel-heading">
            <h4 class="panel-title">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                    Select and Name the Objects in this Image
                </a>
                <div class="navbar-right">
                    <div id="collapse-init" class="btn btn-primary btn-xs">
                        +
                    </div>
                </div>
            </h4>
        </div>
        <div id="collapseOne" class="panel-collapse collapse in">
            <div class="panel-body">
                <div id="add_tags_body"></div>

                {#                <div id="categories" class="row-fluid">#}
                {#                    {% for field in category_form %}#}
                {#                        {{ field }}#}
                {#                        <label for="{{ field.auto_id }}">{{ field.label }}</label>#}
                {#                    {% endfor %}#}
                {#                </div>#}

                <div class="ui-widget">
                    <label for="dictionary">Tags: </label>
                    <input id="dictionary">
                </div>

                {#                <div class="ui-widget">#}
                {#                    <label for="tags">Tags: </label>#}
                {#                    <input id="tags">#}
                {#                </div>#}


            </div>
            <div class="panel-footer">
                <ul class="pager">
                    <li class="next">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo"
                           class="btn btn-default">Next →</a>
                    </li>
                </ul>
            </div>
        </div>

    </div>







    <div class="panel panel-default">
        <div class="panel-heading">
            <h4 class="panel-title">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
                    Please select the type of image this is, from the options below
                </a>
            </h4>
        </div>
        <div id="collapseTwo" class="panel-collapse collapse">
            <div class="panel-body">

                {% for type_key, type_value in image_types.items %}
                    <input type="checkbox" value="{{ type_key }}" id="type_check{{ forloop.counter }}" />

                    <label for="type_check{{ forloop.counter }}">{{ type_value }}</label>
                {% empty %}
                    <p>(No previous tags found for this image)</p>
                {% endfor %}

            </div>
            <div class="panel-footer">
                <ul class="pager">
                    <li class="previous">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne"
                           class="btn btn-default">← Previous</a>
                    </li>
                    <li class="next">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree"
                           class="btn btn-default">Next →</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>





    <div class="panel panel-default">
        <div class="panel-heading">
            <h4 class="panel-title">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree">
                    Please select the Theme(s) of the image, from the options below
                </a>
            </h4>
        </div>
        <div id="collapseThree" class="panel-collapse collapse">
            <div class="panel-body">
                <div id="add_category_body"></div>


                {% for theme_key, theme_value in image_themes.items %}
                    <input type="checkbox" value="{{ theme_key }}" id="theme_check{{ forloop.counter }}" />
                    <label for="theme_check{{ forloop.counter }}">{{ theme_value }}</label>
                {% empty %}
                    <p>(No previous tags found for this image)</p>
                {% endfor %}
                <div id="category_tree"></div>

            </div>
            <div class="panel-footer">
                <ul class="pager">
                    <li class="previous">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo"
                           class="btn btn-default">← Previous</a>
                    </li>
                    <li class="next">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseFour"
                           class="btn btn-default">Next →</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>


    <div class="panel panel-default">
        <div class="panel-heading">
            <h4 class="panel-title">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapseFour">
                    Please transcribe the Caption in this image, if present.
                </a>
            </h4>
        </div>
        <div id="collapseFour" class="panel-collapse collapse">
            <div class="panel-body">

                <div id="free_text_caption" >
                    <label for="input_caption">Caption</label>
                    <textarea class="form-control" rows="2" id="input_caption" name="input_caption"></textarea>
                </div>

            </div>
            <div class="panel-footer">
                <ul class="pager">
                    <li class="previous">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree"
                           class="btn btn-default">← Previous</a>
                    </li>
                    <li class="next">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseFive"
                           class="btn btn-default">Next →</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>




    <div class="panel panel-default">
        <div class="panel-heading">
            <h4 class="panel-title">
                <a data-toggle="collapse" data-parent="#accordion" href="#collapseFive">
                    Please enter a description of the image                                </a>
            </h4>
        </div>
        <div id="collapseFive" class="panel-collapse collapse">
            <div class="panel-body">

                <div id="free_text_description" class="row-fluid">
                    <label for="free-text-area">Description</label>
                    <textarea name="image_description" class="form-control"
                              rows="3" id="free-text-area"></textarea>
                </div>
            </div>

            <div class="panel-footer">
                <ul class="pager">
                    <li class="previous">
                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseFour"
                           class="btn btn-default">← Previous</a>
                    </li>
                    {% if user.is_authenticated %}
                        <li class="next">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseSix"
                               class="btn btn-default">Next →</a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </div>




    {#    <div class="panel panel-default">#}
    {#        <div class="panel-heading">#}
    {#            <h4 class="panel-title">#}
    {#                <a data-toggle="collapse" data-parent="#accordion" href="#collapseSix">#}
    {#                    Please select the tags below which describe the image#}
    {#                </a>#}
    {#            </h4>#}
    {#        </div>#}
    {#        <div id="collapseSix" class="panel-collapse collapse">#}
    {#            <div class="panel-body">#}
    {##}
    {##}
    {#                {% for key in image.tags %}#}
    {#                    <input type="checkbox" value="{{ key }}" id="check{{ forloop.counter }}" />#}
    {##}
    {#                    <label for="check{{ forloop.counter }}">{{ key }}</label>#}
    {#                {% empty %}#}
    {#                    <p>(No previous tags found for this image)</p>#}
    {#                {% endfor %}#}
    {##}
    {##}
    {##}
    {#                <div class="panel-heading">Please select the Flickr tags below which describe the image</div>#}
    {#                <div class="panel-body">#}
    {#                    {% for field in tag_form %}#}
    {#                        {{ field }}#}
    {#                        <label for="{{ field.auto_id }}">{{ field.label }}</label>#}
    {#                    {% empty %}#}
    {#                        (No relevant Flickr tags found for this image)#}
    {#                    {% endfor %}#}
    {#                </div>#}
    {##}
    {##}
    {#            </div>#}
    {#            <div class="panel-footer">#}
    {#                <ul class="pager">#}
    {#                    <li class="previous">#}
    {#                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseFive"#}
    {#                           class="btn btn-default">← Previous</a>#}
    {#                    </li>#}
    {#                    <li class="next">#}
    {#                        <a data-toggle="collapse" data-parent="#accordion" href="#collapseSevern"#}
    {#                           class="btn btn-default">Next →</a>#}
    {#                    </li>#}
    {#                </ul>#}
    {#            </div>#}
    {#        </div>#}
    {##}
    {#    </div>#}





    {% if user.is_authenticated %}



        {#        <div class="panel panel-default">#}
        {#            <div class="panel-heading">#}
        {#                <h4 class="panel-title">#}
        {#                    <a data-toggle="collapse" data-parent="#accordion" href="#collapseSevern">#}
        {#                        Please select one or more creation techniques which are relevant to the image#}
        {#                    </a>#}
        {#                </h4>#}
        {#            </div>#}
        {#            <div id="collapseSevern" class="panel-collapse collapse">#}
        {#                <div class="panel-body">#}
        {##}
        {##}
        {#                    <div class="row-fluid">#}
        {##}
        {#                        {% for field in create_tech_form %}#}
        {#                            {{ field }}#}
        {#                            <label for="{{ field.auto_id }}">{{ field.label }}</label>#}
        {##}
        {#                        {% endfor %}#}
        {##}
        {#                    </div>#}
        {##}
        {#                </div>#}
        {#                <div class="panel-footer">#}
        {#                    <ul class="pager">#}
        {#                        <li class="previous">#}
        {#                            <a data-toggle="collapse" data-parent="#accordion" href="#collapseSix"#}
        {#                               class="btn btn-default">← Previous</a>#}
        {#                        </li>#}
        {#                    </ul>#}
        {#                </div>#}
        {#            </div>#}
        {#        </div>#}


    {% else %}
        <hr>


        <div class="bs-component">
            <div class="alert alert-dismissable alert-info">
                <button type="button" class="close" data-dismiss="alert">×</button>
                <strong>Heads up!</strong>   You are not logged in. You can do more if you sign up!

            </div>
            <div id="source-button" class="btn btn-primary btn-xs" style="display: none;">&lt; &gt;</div></div>
    {% endif %}




    </div>
    <button type="submit" class="btn btn-primary btn-lg">Finish!</button>
    <div class="navbar-right">
        <div id="load_new_image" class="btn btn-primary">
            <a href="{% url 'image.random' %}">Skip</a>
        </div>
    </div>
    </form>

    </div>
    </div>

    {#            <div id="load_new_image" class="btn btn-info btn-lg">New Image</div>#}
    </div>

    </div>
    <hr>

    <div class="container">
        <div class="col-xs-12 col-sm-6">
            <div class="bs-example table-responsive">
                <table class="table table-striped table-hover ">
                    <tbody>
                    {% for mykey,value in formatted_info.items %}
                        {% if mykey != 'tags' %}

                            <tr><th>{{ mykey }}</th><td>{{ value }}</td></tr>

                        {% endif %}
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div>
        <table style="margin-top: 1em;">
            <thead>
            <tr>
                <th colspan="2" style="font-size: 110%; font-weight: bold; text-align: left; padding-left: 0.1em;">
                    Coordinates
                </th>
                <th colspan="2" style="font-size: 110%; font-weight: bold; text-align: left; padding-left: 0.1em;">
                    Dimensions
                </th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td style="width: 10%;"><b>X<sub>1</sub>:</b></td>
                <td style="width: 30%;"><input type="text" id="x1" value="-" /></td>
                <td style="width: 20%;"><b>Width:</b></td>
                <td><input type="text" value="-" id="w" /></td>
            </tr>
            <tr>
                <td><b>Y<sub>1</sub>:</b></td>
                <td><input type="text" id="y1" value="-" /></td>
                <td><b>Height:</b></td>
                <td><input type="text" id="h" value="-" /></td>
            </tr>
            <tr>
                <td><b>X<sub>2</sub>:</b></td>
                <td><input type="text" id="x2" value="-" /></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td><b>Y<sub>2</sub>:</b></td>
                <td><input type="text" id="y2" value="-" /></td>
                <td></td>
                <td></td>
            </tr>
            </tbody>
        </table>
    </div>
    <div class="container">
        <div id="preview" style="width: 100px; height: 100px; overflow: hidden;">
            <img src="{{ image.imageurl }}"/>
        </div>
    </div>

    <div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <img id='zoom-photo' src="{{ image.imageurl }}" style='width: 100%; height:auto; '>
            </div>
        </div>
    </div>
{% endblock %}